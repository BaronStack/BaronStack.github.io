{"title":"C++面试问题准备：什么函数不能作为虚函数","slug":"C-面试问题准备：什么函数不能作为虚函数","date":"2018-03-11T07:22:28.000Z","updated":"2018-03-11T07:57:47.000Z","comments":true,"path":"api/articles/C-面试问题准备：什么函数不能作为虚函数.json","photos":[],"link":"","excerpt":"虚函数虚函数必须是类的非静态成员，即在类的成员函数生命中前面关键字为virtual的是虚函数。虚函数是为了实现的面向对象的多态（动态绑定）机制而提出来的。<br>即在程序运行过程中，进行对象所属类型的匹配，也是父类对象访问子类成员的方式。本质上还是为了实现代码复用以及项目的鲁棒性。","covers":null,"content":"<p><strong><font color=\"#DC143C\">虚函数</font></strong></p>\n<p>虚函数必须是类的非静态成员，即在类的成员函数生命中前面关键字为<code>virtual</code>的是虚函数。虚函数是为了实现的面向对象的多态（动态绑定）机制而提出来的。<br>即在程序运行过程中，进行对象所属类型的匹配，也是父类对象访问子类成员的方式。本质上还是为了实现代码复用以及项目的鲁棒性。<a id=\"more\"></a></p>\n<p>不能作为虚函数的函数如下：</p>\n<ul>\n<li>普通函数（非成员函数）</li>\n</ul>\n<blockquote>\n<p>因为普通函数只能被overload，不能被override，也不能被继承，所以在编译的时候就绑定函数，所以不能申明为virtual，没有意义！</p>\n</blockquote>\n<ul>\n<li>构造函数</li>\n</ul>\n<blockquote>\n<p>主要因为构造函数是用来确定初始化对象的,virtual主要是为了在不了解具体的情况下实现动态绑定，调用不同类型中合适的成员函数而存在的，现在对象都没产生，怎么能实现多态呢。<br>构造函数不能被继承，所以不能virtual；</p>\n</blockquote>\n<ul>\n<li>内联函数</li>\n</ul>\n<font color=\"#DC143C\"><br>inline函数在编译时被展开，在调用处将整个函数替换为代码块，省去了函数跳转的时间，提高了SD，减少函数调用的开销，虚函数是为了继承后对象能够准确的调用自己的函数，执行相应的动作。</font>\n\n<blockquote>\n<p>inline函数是在编译时期展开的，而virtual函数是在运行时期进行动态绑定，所以两者执行时期不一样。、</p>\n</blockquote>\n<ul>\n<li>静态成员函数</li>\n</ul>\n<blockquote>\n<p>静态成员函数是类的组成部分，但是不是任何对象的组成部分，所有对象共享一份，没有必要动态绑定.而且静态成员函数只能访问静态变量，虽然说是可以继承，但是编译器却不会让它真正的继承，它只能作为整个类共有的成员。</p>\n</blockquote>\n<ul>\n<li>友元函数</li>\n</ul>\n<blockquote>\n<p>友员函数不是类的成员函数，C++不支持友员被继承，所以不能为virtual</p>\n</blockquote>\n<h5 id=\"综上可以作为虚函数的条件是\"><a href=\"#综上可以作为虚函数的条件是\" class=\"headerlink\" title=\"综上可以作为虚函数的条件是\"></a><strong>综上可以作为虚函数的条件是</strong></h5><font color=\"#DC143C\"><br><br>1. 类的成员函数<br>2. 能被继承<br>3. 动态编译 </font>\n\n<blockquote>\n<p>空指针不能调用虚函数，因为虚指针（指向虚函数表）在类实例化时创建，没有创建对象就没有虚指针，那么用空指针调用虚函数就会崩溃。</p>\n</blockquote>\n<p>空指针可以访问普通的成员函数，但是该成员函数中不能调用类的成员变量，因为虽然知道了函数的入口地址，但是成员变量是在实例化的时候分配地址和空间的。所以如果该函数调用成员变量，指针会因为找不到而崩溃。</p>\n","categories":[{"name":"面试","slug":"面试","count":28,"path":"api/categories/面试.json"}],"tags":[{"name":"C++","slug":"C","count":22,"path":"api/tags/C.json"}]}